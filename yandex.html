<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Фильтрация автоподсказок</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .autocomplete {
            position: relative;
            width: 300px;
        }

        #arrival-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        #arrival-input.open {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
        }

        .results {
            margin-top: 20px;
            font-size: 16px;
        }
    </style>
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&apikey=daa45afb-a989-4163-8df6-1b1edba1137d&suggest_apikey=5e11305c-8d8a-4669-9069-5c56422200c1"></script>
</head>

<body>
    <h1>Введите адрес</h1>
    <div class="autocomplete">
        <input type="text" id="arrival-input" placeholder="Введите адрес" autocomplete="off">
    </div>
    <div class="results">
        <p>Результат:
        <pre id="result"></pre>
        </p>
    </div>

    <script>
        ymaps.ready(() => {
            const input = document.getElementById('arrival-input');
            const resultContainer = document.getElementById('result');

            // Подключаем подсказки
            const suggestView = new ymaps.SuggestView('arrival-input', { results: 5 });

            // Обработка выбора подсказки
            suggestView.events.add('select', (event) => {
                const selectedAddress = event.get('item').value;
                resultContainer.textContent = 'Загрузка данных...';

                // Геокодируем для получения всех данных
                ymaps.geocode(selectedAddress, { results: 1 }).then((response) => {
                    const geoObject = response.geoObjects.get(0);
                    console.log(geoObject);

                    if (geoObject) {
                        // Проверяем, что страна - Россия
                        const country = geoObject.getCountry();
                        if (country === 'Россия') {
                            // Получаем город, регион и координаты
                            const city = geoObject.getLocalities()[0] || 'Неизвестный город';
                            const region = geoObject.getAdministrativeAreas()[0] || 'Неизвестный регион';
                            const coordinates = geoObject.geometry._coordinates; // [долгота, широта]

                            // Формируем строку с результатами
                            const resultText = `
                                Город: ${city}
                                Регион: ${region}
                                Страна: ${country}
                                Координаты: [${coordinates[1]}, ${coordinates[0]}]  // [широта, долгота]
                            `;

                            // Отображаем данные в контейнере
                            resultContainer.textContent = resultText;
                        } else {
                            resultContainer.textContent = 'Выберите адрес в России.';
                        }
                    } else {
                        resultContainer.textContent = 'Не удалось определить данные.';
                    }
                }).catch((error) => {
                    console.error('Ошибка геокодирования:', error);
                    resultContainer.textContent = 'Ошибка при получении данных.';
                });
            });
        });
    </script>
</body>






</html>